id: ys_paragraphs
label: YS Paragraphs
description: Migration of text to Drupal Paragraph Text
source_type: 'custom embedded data'

source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  urls:
    - profiles/custom/yalesites_profile/modules/custom/ys_demo_migration/content/pages.json
  item_selector: /data/paragraphs
  fields:
    - name: paragraph_id
      label: 'Paragraph ID'
      selector: paragraph_id
    - name: paragraph_type
      label: 'Paragraph type'
      selector: paragraph_type
    - name: field_text_value
      label: 'Text value'
      selector: paragraph_fields/field_text/value
    - name: field_text_format
      label: 'Text format'
      selector: paragraph_fields/field_text/format
    - name: field_attribution
      label: 'Attribution data'
      selector: paragraph_fields/field_attribution/value

  ids:
    paragraph_id:
      type: string

process:

  field_text/value: field_text_value
  field_text/format: field_text_format
  field_attribution/value: field_attribution
  type: paragraph_type

destination:
  plugin: entity_reference_revisions:paragraph

migration_dependencies: {}